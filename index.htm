<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html>
<head>
	<title>Stick Figure</title>
	<!-- TODO: seperate css file -->
	<style>
	body {
		margin: 0;
		padding: 0;
		font-family: sans-serif;
		font-size: 14px;
	}
	svg {
		width: 400px;
		height: 400px;
		fill: none;
		stroke: black;
		stroke-width: 1;
		border: 1px solid black;
	}
	/*
	How to flip the Y axis to normal cartisian coordinates, without reversing text.
	https://stackoverflow.com/questions/3846015/flip-svg-coordinate-system
	*/
	svg.cartesian {
		display:flex;
	}
	svg.cartesian > g {
		transform: scaleY(-1);
	}
	svg.cartesian > g text {
		transform: scaleY(-1);
	}
	.svg_frame {
		position: relative;
		padding-left: 40px;
		padding-bottom: 40px;
	}
	</style>
	<script src="point.js" charset="utf-8"></script>
	<script src="stick_figure.js" charset="utf-8"></script>
	<script type="text/javascript">
	window.onload = function () {
		const id1 = "a";
		const figure1 = new StickFigure(id1, new Point(-20, -5));
		document.getElementById("container").innerHTML += `<g id="${id1}"/>`;

		const id2 = "b";
		document.getElementById("container").innerHTML += `<g id="${id2}"/>`;
		const figure2 = new StickFigure(id2, new Point(15, 5), 0.4);

		const id3 = "c";
		document.getElementById("container").innerHTML += `<g id="${id3}"/>`;
		const figure3 = new StickFigure(id3, new Point(25, 0), 0.6);

		function drawFigure() {
			const inner_svg1 = figure1.inner_svg();
			document.getElementById(id1).innerHTML = inner_svg1;

			const inner_svg2 = figure2.inner_svg();
			document.getElementById(id2).innerHTML = inner_svg2;

			const inner_svg3 = figure3.inner_svg();
			document.getElementById(id3).innerHTML = inner_svg3;
		}
		// Dance!
		window.setInterval(drawFigure, 200);
	};
	</script>
</head>
<body>
	<div class="svg_frame">
		<!-- TODO: dynamically set viewBox. -->
		<svg id="container" class="cartesian" viewBox="-50 -50 100 100" preserveAspectRatio="xMidYMid meet">
			<g>
				<!-- Vertical / Horizontal Axis -->
				<path d="M0 -250 V 500" stroke="green" stroke-width="0.5" stroke-opacity="0.5" />,
				<path d="M-250 0 H 500" stroke="green" stroke-width="0.5" stroke-opacity="0.5" />
			</g>
		</svg>
	</div>
</body>
</html>
